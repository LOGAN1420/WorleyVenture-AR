<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Card AR Experience</title>
    <script src="https://cdn.jsdelivr.net/gh/aframevr/aframe@1.6.0/dist/aframe-master.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
    
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            overflow: hidden;
        }
        
        .arjs-loader {
            height: 100%;
            width: 100%;
            position: absolute;
            top: 0;
            left: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .arjs-loader div {
            text-align: center;
            font-size: 1.25em;
            color: white;
            margin-bottom: 20px;
        }

        .loader-spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid white;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .instructions {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-size: 14px;
            max-width: 300px;
            z-index: 1000;
        }

        .ar-info {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 8px;
            border-radius: 5px;
            font-size: 12px;
            z-index: 1000;
        }
    </style>
</head>

<body>
    <!-- Loading screen -->
    <div class="arjs-loader">
        <div>Loading AR Experience...</div>
        <div class="loader-spinner"></div>
        <div style="font-size: 0.9em; margin-top: 20px;">Point your camera at the business card</div>
    </div>

    <!-- Instructions -->
    <div class="instructions">
        <strong>Instructions:</strong><br>
        1. Allow camera access<br>
        2. Point camera at business card<br>
        3. Keep card steady and well-lit<br>
        4. Enjoy the AR experience!
    </div>

    <!-- AR Info -->
    <div class="ar-info">
        Business Card AR | Powered by AR.js
    </div>

    <!-- AR Scene -->
    <a-scene
        vr-mode-ui="enabled: false;"
        renderer="logarithmicDepthBuffer: true; precision: medium;"
        embedded
        arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;"
        gesture-detector
    >
        <!-- Assets -->
        <a-assets>
            <!-- You can preload 3D models here -->
            <!-- <a-asset-item id="businessCard3D" src="./assets/business-card-model.gltf"></a-asset-item> -->
        </a-assets>

        <!-- NFT Marker - Replace with your business card marker -->
        <a-nft
            type="nft"
            url="./markers/business-card"
            smooth="true"
            smoothCount="10"
            smoothTolerance=".01"
            smoothThreshold="5"
            raycaster="objects: .clickable"
            emitevents="true"
            cursor="fuse: false; rayOrigin: mouse;"
        >
            <!-- 3D Business Card Content -->
            <a-entity id="business-card-content">
                
                <!-- Floating Business Info -->
                <a-text
                    value="John Doe\nSoftware Developer"
                    position="0 2 0"
                    align="center"
                    color="#2E86AB"
                    font="kelsonsans"
                    width="8"
                    animation="property: rotation; to: 0 360 0; loop: true; dur: 20000"
                ></a-text>

                <!-- Contact Info Cards -->
                <a-plane
                    position="-1.5 0.5 0"
                    rotation="-90 0 0"
                    width="2"
                    height="0.8"
                    color="#F24236"
                    opacity="0.9"
                    class="clickable"
                    animation__mouseenter="property: scale; to: 1.1 1.1 1.1; startEvents: mouseenter; dur: 200"
                    animation__mouseleave="property: scale; to: 1 1 1; startEvents: mouseleave; dur: 200"
                >
                    <a-text
                        value="ðŸ“§ Email\njohn@example.com"
                        position="0 0 0.01"
                        align="center"
                        color="white"
                        width="4"
                    ></a-text>
                </a-plane>

                <a-plane
                    position="1.5 0.5 0"
                    rotation="-90 0 0"
                    width="2"
                    height="0.8"
                    color="#A23B72"
                    opacity="0.9"
                    class="clickable"
                    animation__mouseenter="property: scale; to: 1.1 1.1 1.1; startEvents: mouseenter; dur: 200"
                    animation__mouseleave="property: scale; to: 1 1 1; startEvents: mouseleave; dur: 200"
                >
                    <a-text
                        value="ðŸ“± Phone\n+1-555-0123"
                        position="0 0 0.01"
                        align="center"
                        color="white"
                        width="4"
                    ></a-text>
                </a-plane>

                <!-- 3D Logo/Avatar -->
                <a-box
                    position="0 1 0"
                    rotation="45 45 0"
                    color="#F18F01"
                    scale="0.5 0.5 0.5"
                    animation="property: rotation; to: 405 405 360; loop: true; dur: 8000"
                    class="clickable"
                ></a-box>

                <!-- Social Media Links -->
                <a-cylinder
                    position="-1 -0.5 0"
                    radius="0.3"
                    height="0.1"
                    color="#1DA1F2"
                    class="clickable"
                    animation__mouseenter="property: scale; to: 1.2 1.2 1.2; startEvents: mouseenter; dur: 200"
                    animation__mouseleave="property: scale; to: 1 1 1; startEvents: mouseleave; dur: 200"
                >
                    <a-text
                        value="Twitter"
                        position="0 0.1 0"
                        align="center"
                        color="white"
                        width="6"
                    ></a-text>
                </a-cylinder>

                <a-cylinder
                    position="0 -0.5 0"
                    radius="0.3"
                    height="0.1"
                    color="#0077B5"
                    class="clickable"
                    animation__mouseenter="property: scale; to: 1.2 1.2 1.2; startEvents: mouseenter; dur: 200"
                    animation__mouseleave="property: scale; to: 1 1 1; startEvents: mouseleave; dur: 200"
                >
                    <a-text
                        value="LinkedIn"
                        position="0 0.1 0"
                        align="center"
                        color="white"
                        width="6"
                    ></a-text>
                </a-cylinder>

                <a-cylinder
                    position="1 -0.5 0"
                    radius="0.3"
                    height="0.1"
                    color="#333"
                    class="clickable"
                    animation__mouseenter="property: scale; to: 1.2 1.2 1.2; startEvents: mouseenter; dur: 200"
                    animation__mouseleave="property: scale; to: 1 1 1; startEvents: mouseleave; dur: 200"
                >
                    <a-text
                        value="GitHub"
                        position="0 0.1 0"
                        align="center"
                        color="white"
                        width="6"
                    ></a-text>
                </a-cylinder>

                <!-- Floating particles effect -->
                <a-entity id="particles">
                    <a-sphere position="2 3 -1" radius="0.05" color="#F24236" animation="property: position; to: -2 4 1; loop: true; dur: 4000"></a-sphere>
                    <a-sphere position="-2 2 1" radius="0.05" color="#A23B72" animation="property: position; to: 2 3 -1; loop: true; dur: 5000"></a-sphere>
                    <a-sphere position="1 4 0" radius="0.05" color="#F18F01" animation="property: position; to: -1 2 0; loop: true; dur: 3000"></a-sphere>
                </a-entity>

            </a-entity>
        </a-nft>

        <!-- Camera -->
        <a-entity camera></a-entity>
    </a-scene>

    <script>
        // Handle AR.js events
        document.addEventListener('DOMContentLoaded', function() {
            const sceneEl = document.querySelector('a-scene');
            const arSystem = sceneEl.systems.arjs;
            
            // Hide loader when AR is ready
            sceneEl.addEventListener('arjs-nft-loaded', function() {
                console.log('NFT marker loaded');
            });

            // Show content when marker is found
            sceneEl.addEventListener('markerFound', function() {
                console.log('Marker found');
                document.querySelector('#business-card-content').setAttribute('visible', true);
            });

            // Hide content when marker is lost
            sceneEl.addEventListener('markerLost', function() {
                console.log('Marker lost');
                document.querySelector('#business-card-content').setAttribute('visible', false);
            });

            // Handle click events on interactive elements
            document.querySelectorAll('.clickable').forEach(element => {
                element.addEventListener('click', function() {
                    console.log('Clicked:', this);
                    // Add your click handlers here
                    // For example, open email client, phone dialer, or social media profiles
                });
            });
        });

        // Remove loader after a delay (fallback)
        setTimeout(() => {
            const loader = document.querySelector('.arjs-loader');
            if (loader) {
                loader.style.display = 'none';
            }
        }, 3000);
    </script>
</body>
</html>
