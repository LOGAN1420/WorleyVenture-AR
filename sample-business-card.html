<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Card AR - Demo with QR Code Marker</title>
    <script src="https://cdn.jsdelivr.net/gh/aframevr/aframe@1.6.0/dist/aframe-master.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            overflow: hidden;
        }
        
        .arjs-loader {
            height: 100%;
            width: 100%;
            position: absolute;
            top: 0;
            left: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .arjs-loader div {
            text-align: center;
            font-size: 1.25em;
            color: white;
            margin-bottom: 20px;
        }

        .loader-spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid white;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .instructions {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 15px;
            border-radius: 8px;
            font-size: 14px;
            max-width: 320px;
            z-index: 1000;
        }

        .qr-code {
            position: absolute;
            top: 10px;
            right: 10px;
            background: white;
            padding: 10px;
            border-radius: 8px;
            z-index: 1000;
        }

        .ar-info {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 8px;
            border-radius: 5px;
            font-size: 12px;
            z-index: 1000;
        }
    </style>
</head>

<body>
    <!-- Loading screen -->
    <div class="arjs-loader">
        <div>Loading AR Experience...</div>
        <div class="loader-spinner"></div>
        <div style="font-size: 0.9em; margin-top: 20px;">Point your camera at the QR code marker</div>
    </div>

    <!-- Instructions -->
    <div class="instructions">
        <strong>Demo Instructions:</strong><br>
        1. Allow camera access<br>
        2. Point camera at the QR code<br>
        3. Keep marker visible and steady<br>
        4. Tap on interactive elements<br><br>
        <small>This demo uses a QR marker. For your business card, you'll need to generate NFT markers as described in the README.</small>
    </div>

    <!-- QR Code Marker for Demo -->
    <div class="qr-code">
        <img src="https://raw.githubusercontent.com/AR-js-org/AR.js/master/data/images/hiro.png" 
             width="100" height="100" alt="Demo Marker">
        <div style="text-align: center; font-size: 12px; margin-top: 5px;">Demo Marker</div>
    </div>

    <!-- AR Info -->
    <div class="ar-info">
        Business Card AR Demo | Powered by AR.js
    </div>

    <!-- AR Scene -->
    <a-scene
        vr-mode-ui="enabled: false;"
        renderer="logarithmicDepthBuffer: true; precision: medium;"
        embedded
        arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false; sourceWidth: 1280; sourceHeight: 960; displayWidth: 1280; displayHeight: 960;"
    >
        <!-- Demo using Hiro marker (easier to test) -->
        <a-marker preset="hiro" raycaster="objects: .clickable" emitevents="true" cursor="fuse: false; rayOrigin: mouse;">
            
            <!-- 3D Business Card Content -->
            <a-entity id="business-card-content">
                
                <!-- Company Logo/Avatar -->
                <a-text
                    value="WORLEY\nAR CARD"
                    position="0 2.5 0"
                    align="center"
                    color="#2E86AB"
                    font="kelsonsans"
                    width="12"
                    animation="property: rotation; to: 0 360 0; loop: true; dur: 20000"
                ></a-text>

                <!-- Professional Title -->
                <a-text
                    value="John Worley\nSenior Developer"
                    position="0 1.8 0"
                    align="center"
                    color="#333"
                    width="8"
                ></a-text>

                <!-- Contact Info Cards -->
                <a-plane
                    position="-1.5 0.8 0"
                    rotation="-15 0 0"
                    width="2.5"
                    height="1"
                    color="#F24236"
                    opacity="0.9"
                    class="clickable"
                    animation__mouseenter="property: scale; to: 1.1 1.1 1.1; startEvents: mouseenter; dur: 200"
                    animation__mouseleave="property: scale; to: 1 1 1; startEvents: mouseleave; dur: 200"
                    onclick-handler
                >
                    <a-text
                        value="ðŸ“§ EMAIL\nworley@company.com"
                        position="0 0 0.01"
                        align="center"
                        color="white"
                        width="4"
                    ></a-text>
                </a-plane>

                <a-plane
                    position="1.5 0.8 0"
                    rotation="-15 0 0"
                    width="2.5"
                    height="1"
                    color="#A23B72"
                    opacity="0.9"
                    class="clickable"
                    animation__mouseenter="property: scale; to: 1.1 1.1 1.1; startEvents: mouseenter; dur: 200"
                    animation__mouseleave="property: scale; to: 1 1 1; startEvents: mouseleave; dur: 200"
                >
                    <a-text
                        value="ðŸ“± PHONE\n+1-555-WORLEY"
                        position="0 0 0.01"
                        align="center"
                        color="white"
                        width="4"
                    ></a-text>
                </a-plane>

                <!-- 3D Company Logo -->
                <a-entity position="0 0.2 0">
                    <a-box
                        position="0 0 0"
                        rotation="45 45 0"
                        color="#F18F01"
                        scale="0.3 0.3 0.3"
                        animation="property: rotation; to: 405 405 360; loop: true; dur: 8000"
                        class="clickable"
                    ></a-box>
                    <a-text
                        value="W"
                        position="0 0 0.2"
                        align="center"
                        color="white"
                        width="8"
                    ></a-text>
                </a-entity>

                <!-- Social Media Platform Buttons -->
                <a-entity position="0 -0.8 0">
                    <!-- LinkedIn -->
                    <a-cylinder
                        position="-1.2 0 0"
                        radius="0.25"
                        height="0.1"
                        color="#0077B5"
                        class="clickable"
                        animation__mouseenter="property: scale; to: 1.3 1.3 1.3; startEvents: mouseenter; dur: 200"
                        animation__mouseleave="property: scale; to: 1 1 1; startEvents: mouseleave; dur: 200"
                    >
                        <a-text
                            value="in"
                            position="0 0.1 0"
                            align="center"
                            color="white"
                            width="8"
                        ></a-text>
                    </a-cylinder>

                    <!-- Portfolio/Website -->
                    <a-cylinder
                        position="0 0 0"
                        radius="0.25"
                        height="0.1"
                        color="#333"
                        class="clickable"
                        animation__mouseenter="property: scale; to: 1.3 1.3 1.3; startEvents: mouseenter; dur: 200"
                        animation__mouseleave="property: scale; to: 1 1 1; startEvents: mouseleave; dur: 200"
                    >
                        <a-text
                            value="WEB"
                            position="0 0.1 0"
                            align="center"
                            color="white"
                            width="6"
                        ></a-text>
                    </a-cylinder>

                    <!-- GitHub -->
                    <a-cylinder
                        position="1.2 0 0"
                        radius="0.25"
                        height="0.1"
                        color="#24292e"
                        class="clickable"
                        animation__mouseenter="property: scale; to: 1.3 1.3 1.3; startEvents: mouseenter; dur: 200"
                        animation__mouseleave="property: scale; to: 1 1 1; startEvents: mouseleave; dur: 200"
                    >
                        <a-text
                            value="GIT"
                            position="0 0.1 0"
                            align="center"
                            color="white"
                            width="6"
                        ></a-text>
                    </a-cylinder>
                </a-entity>

                <!-- Floating particles effect -->
                <a-entity id="particles">
                    <a-sphere position="2 3 -1" radius="0.03" color="#F24236" 
                              animation="property: position; to: -2 4 1; loop: true; dur: 6000"></a-sphere>
                    <a-sphere position="-2 2 1" radius="0.03" color="#A23B72" 
                              animation="property: position; to: 2 3 -1; loop: true; dur: 7000"></a-sphere>
                    <a-sphere position="1 4 0" radius="0.03" color="#F18F01" 
                              animation="property: position; to: -1 2 0; loop: true; dur: 5000"></a-sphere>
                    <a-sphere position="-1 3 1" radius="0.03" color="#2E86AB" 
                              animation="property: position; to: 1 1 -1; loop: true; dur: 8000"></a-sphere>
                </a-entity>

                <!-- Skill Tags -->
                <a-entity position="0 -1.5 0">
                    <a-text
                        value="AR/VR â€¢ Web Dev â€¢ Mobile Apps"
                        position="0 0 0"
                        align="center"
                        color="#666"
                        width="6"
                        animation="property: position; to: 0 -1.3 0; dir: alternate; loop: true; dur: 3000"
                    ></a-text>
                </a-entity>

            </a-entity>
        </a-marker>

        <!-- Camera -->
        <a-entity camera="fov: 80; zoom: 1;"></a-entity>
    </a-scene>

    <script>
        // Register click handler component
        AFRAME.registerComponent('onclick-handler', {
            init: function () {
                this.el.addEventListener('click', function () {
                    // Add click feedback
                    this.setAttribute('animation__click', 'property: scale; to: 0.9 0.9 0.9; dur: 100; dir: alternate; loop: 1');
                    
                    // Add your custom click actions here
                    console.log('Clicked on:', this);
                    
                    // Example: Show alert or open link
                    if (this.querySelector('a-text').getAttribute('value').includes('EMAIL')) {
                        alert('Opening email client...\nworley@company.com');
                        // window.open('mailto:worley@company.com');
                    }
                });
            }
        });

        // Handle AR.js events
        document.addEventListener('DOMContentLoaded', function() {
            const sceneEl = document.querySelector('a-scene');
            
            // Show content when marker is found
            sceneEl.addEventListener('markerFound', function() {
                console.log('Marker found - showing AR content');
                document.querySelector('#business-card-content').setAttribute('visible', true);
                
                // Hide instructions after marker is found
                setTimeout(() => {
                    const instructions = document.querySelector('.instructions');
                    if (instructions) {
                        instructions.style.opacity = '0.3';
                    }
                }, 2000);
            });

            // Hide content when marker is lost
            sceneEl.addEventListener('markerLost', function() {
                console.log('Marker lost - hiding AR content');
                document.querySelector('#business-card-content').setAttribute('visible', false);
                
                // Show instructions again
                const instructions = document.querySelector('.instructions');
                if (instructions) {
                    instructions.style.opacity = '1';
                }
            });

            // Handle click events on interactive elements
            document.querySelectorAll('.clickable').forEach(element => {
                element.addEventListener('click', function() {
                    console.log('Interactive element clicked:', this);
                    
                    // Add visual feedback
                    this.setAttribute('animation__feedback', 
                        'property: rotation; to: 0 360 0; dur: 1000; loop: 1');
                });
            });
        });

        // Remove loader after scene is ready
        document.querySelector('a-scene').addEventListener('loaded', function() {
            setTimeout(() => {
                const loader = document.querySelector('.arjs-loader');
                if (loader) {
                    loader.style.display = 'none';
                }
            }, 1000);
        });

        // Fallback loader removal
        setTimeout(() => {
            const loader = document.querySelector('.arjs-loader');
            if (loader) {
                loader.style.display = 'none';
            }
        }, 5000);
    </script>
</body>
</html>
